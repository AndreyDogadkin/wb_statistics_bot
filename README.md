# WB Statistics Telegram Bot
___
## Описание:
Телеграм бот создан для быстрого взаимодействия с WB API.

В мобильном приложении WB Partners не реализован функционал просмотра продаж по артикулам.
Бот закрывает потребность пользователей получать более точные данные о своих продажах через мобильное
устройство.

### Функционал:
⚠️ Проект находится в разработке.
- [x] Мультиаккаунт
  - [x] Добавление аккаунтов
  - [x] Редактирование аккаунтов
  - [ ] Удаление аккаунтов
- [x] Сохранение токенов WB API
  - [x] Хранение организовано в зашифрованном виде по стандарту AES.
  - [x] Обновление токенов
- [x] Получение статистики
  - [x] Получение статистики артикула при выборе предустановленных периодов
  - [ ] Получение статистики при выборе произвольного периода
  - [ ] Получение статистики по нескольким артикулам за 1 запрос
- [x] Избранные запросы
  - [x] Добавление запроса в избранное
  - [x] Удаление запроса из избранного
- [x] Лимиты запросов
  - [x] Просмотр лимитов запросов
  - [x] Обновление лимитов запросов
- [ ] Дополнительные функции.
  - [ ] Получение остатков товаров на складах
  - [ ] Получение продаж с подробным описанием

___
## Быстрый старт:
⚠️ Для полноценной работы бота необходим аккаунт WB Partners.

Последовательно выполните команды:
```
git clone https://github.com/AndreyDogadkin/wb_statistics_bot.git
```
```
cd wb_statistics_bot
```
Создайте файл .env и заполните его по примеру env.example
```
TEST_SERVER=False

# Переменные телеграм
TG_TOKEN=  # Телеграм токен.
NGROK_URL=  # URL туннеля (для локального запуска через webhook).
ADMINS=  # Список администраторов бота через запятую.

# Переменные для шифрования токенов
PASSWORD_FOR_ENCRYPTION=  # Пароль для генерации ключа шифрования.
DKLEN=  # Длина ключа шифрования.
ENCRYPTION_KEY= # Ключ шифрования *

# Переменные БД
DB_PROD=False
DB_USER= # Имя пользователя
DB_URL=  # Путь до базы данных либо URL.
DB_PASSWORD=  # Пароль базы данных.
DB_NAME= # Название БД
```
* Для генерации ключа шифрования, находясь в корневой директории проекта, выполните команду:
```
python utils/AES_encryption/generate_encryption_key.py 
```
После заполнения, находясь в корневой директории проекта, выполните команду:
```
bash local_start.sh
```
___
Зависимости:
* Python3.11
* aiogram3
* aiohttp
* fastapi
* pydantic
* pydantic-settings
* SQLAlchemy
* alembic
