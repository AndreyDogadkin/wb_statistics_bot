# <p align="center">ü´ê WB Statistics Telegram Bot ü´ê</p>

<p align="center">
  <img src="https://img.shields.io/badge/Python-FFD43B?style=for-the-badge&logo=python&logoColor=blue" alt="Python">
  <img src="https://img.shields.io/badge/aiogram-%232671E5.svg?style=for-the-badge&logo=telegram&logoColor=white" alt="Aiogram">
  <img src="https://img.shields.io/badge/FastAPI-005571?style=for-the-badge&logo=fastapi" alt="FastAPI">
  <img src="https://img.shields.io/badge/iohttp-%232C5bb4.svg?style=for-the-badge&logo=aiohttp&logoColor=white" alt="AIOHTTP">
  <img src="https://img.shields.io/badge/pydantic-E6007A?style=for-the-badge&logo=pydantic&logoColor=white" alt="Pydantic">
  <img src="https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white" alt="Postgres">
  <img src="https://img.shields.io/badge/SQLite-07405E?style=for-the-badge&logo=sqlite&logoColor=white" alt="SQLite">
  <img src="https://img.shields.io/badge/SQLAlchemy-529873?style=for-the-badge&logo=sqlalchemy&logoColor=white" alt="SQLAlchemy">
  <img src="https://img.shields.io/badge/docker-%230db7ed.svg?style=for-the-badge&logo=docker&logoColor=white" alt="Docker">
  <img src="https://img.shields.io/badge/nginx-%23009639.svg?style=for-the-badge&logo=nginx&logoColor=white" alt="Nginx">
  <img src="https://img.shields.io/badge/uvicorn-%298729.svg?style=for-the-badge" alt="Uvicorn">
  <img src="https://img.shields.io/badge/github%20actions%20-%232671E5.svg?&style=for-the-badge&logo=github%20actions&logoColor=white"/>
</p>

___
## –û–ø–∏—Å–∞–Ω–∏–µ:
–¢–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å WB API.

–í –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ WB Partners –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ–¥–∞–∂ –ø–æ –∞—Ä—Ç–∏–∫—É–ª–∞–º.
–ë–æ—Ç –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–ª—É—á–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–≤–æ–∏—Ö –ø—Ä–æ–¥–∞–∂–∞—Ö —á–µ—Ä–µ–∑ –º–æ–±–∏–ª—å–Ω–æ–µ
—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.

[![Telegram](https://img.shields.io/badge/Telegram-@wb_statistics_robot-2CA5E0?style=for-the-badge&logo=telegram&logoColor=white)](https://t.me/wb_statistics_robot)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
‚ö†Ô∏è –ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.
- [x] –ú—É–ª—å—Ç–∏–∞–∫–∫–∞—É–Ω—Ç
  - [x] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
  - [x] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
  - [x] –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- [x] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ WB API
  - [x] –•—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–æ –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É AES.
  - [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- [x] –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - [x] –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∞—Ä—Ç–∏–∫—É–ª–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
  - [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
  - [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∞—Ä—Ç–∏–∫—É–ª–∞–º –∑–∞ 1 –∑–∞–ø—Ä–æ—Å
- [x] –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
  - [x] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
  - [x] –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- [x] –õ–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
  - [x] –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–∏–º–∏—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
  - [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö
- [ ] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.
  - [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö
  - [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º

___
## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:
‚ö†Ô∏è –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º –∞–∫–∫–∞—É–Ω—Ç WB Partners.

–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:
```
git clone https://github.com/AndreyDogadkin/wb_statistics_bot.git
```
```
cd wb_statistics_bot
```
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ –ø–æ –ø—Ä–∏–º–µ—Ä—É env.example
```
USE_PROXY=False

# –¢–µ–ª–µ–≥—Ä–∞–º
SUPER_USERS= # list –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
TG_TOKEN=  # str –¢–µ–ª–µ–≥—Ä–∞–º —Ç–æ–∫–µ–Ω.
TG_TOKEN_SUPPORT=  # str -- –¢–µ–ª–µ–≥—Ä–∞–º —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ê–¥–º–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø—Ä–æ–±–ª–µ–º–º–∞—Ö
SUPPORT_ID=  # int -- id –ø–æ–ª—É—á–∞—Ç–µ–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö
PROXY=  # srt -- –ü—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä

# –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
PASSWORD_FOR_ENCRYPTION=  # str -- –ü–∞—Ä–æ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.
DKLEN=  # int -- –î–ª–∏–Ω–∞ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.
ENCRYPTION_KEY= # bytes -- –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è(—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ utils/generate_encryption_key.py)

# –ë–î
DB_PROD= # bool -- –ï—Å–ª–∏ False —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite
DB_HOST= # str -- –•–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DB_PORT= # int -- –ü–æ—Ä—Ç –±–∞–∑—ã –∑–∞–Ω–Ω—ã—Ö
POSTGRES_USER= # str -- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POSTGRES_PASSWORD=  # str -- –ü–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
POSTGRES_DB= # str -- –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

# Webhook
USE_WEBHOOK= # bool -- True –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ webhook
WEBHOOK_BASE_URL= # str -- –ù–∞–ø—Ä–∏–º–µ—Ä: https://xxx.ngrok-free.app
WEBHOOK_PATH= # str -- –ù–∞–ø—Ä–∏–º–µ—Ä: /bot/
WEBHOOK_SECRET= # str -- –í–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á(–ü—Ä–∏–¥—É–º—ã–≤–∞–µ—Ç–µ/–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç–µ —Å–∞–º–∏)
WEBHOOK_HOST= # str -- –ù–∞–ø—Ä–∏–º–µ—Ä: http://127.0.0.1 –∏–ª–∏ 0.0.0.0 –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ docker
WEBHOOK_PORT= # str -- –ù–∞–ø—Ä–∏–º–µ—Ä: 8000
```
* –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è, –Ω–∞—Ö–æ–¥—è—Å—å –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```
python bot/utils/aes_encryption/generate_encryption_key.py 
```
–ü–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è, –Ω–∞—Ö–æ–¥—è—Å—å –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:
```
docker compose up
```
–∏–ª–∏
```
python3.11 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
alembic upgrade head
python -m bot
```
